{"version":3,"sources":["App.js","index.js"],"names":["App","props","getImage","a","image","document","getElementById","value","console","log","img","Image","onerror","e","onload","this","src","match","replace","state","user","bridge","send","then","setState","activePanel","id","status","before","size","photo_100","first_name","header","mode","weight","type","onClick","style","textAlign","alt","React","Component","ReactDOM","render"],"mappings":"uTA2GeA,G,yDAtFd,WAAYC,GAAQ,IAAD,8BAClB,cAAMA,IAcPC,SAfmB,sBAeR,8BAAAC,EAAA,sDACEC,EAAQC,SAASC,eAAe,OAAOC,MAE7CC,QAAQC,IAAI,CAACL,UAETA,KAEIM,EAAM,IAAIC,OACVC,QAAU,SAASC,KAEvBH,EAAII,OAAS,WACPC,KAAKC,IAAIC,MAAM,UACjBZ,SAASC,eAAe,YAAYU,IAAMD,KAAKC,IAE/CD,KAAKC,IAAMD,KAAKC,IAAIE,QAAQ,QAAS,WAGzCR,EAAIM,IAAM,CAACZ,UAjBX,2CAZV,EAAKe,MAAQ,CACZC,KAAM,MAJW,E,gEAQE,IAAD,OACnBC,IAAOC,KAAK,sBAAuB,IACjCC,MAAK,SAACH,GACN,EAAKI,SAAS,CAAEJ,c,+BA2BT,IAAD,EACgBL,KAAKI,MAArBC,EADA,EACAA,KAAMhB,EADN,EACMA,MAEd,OACU,kBAAC,IAAD,CAAMqB,YAAY,QACd,kBAAC,IAAD,CAAOC,GAAG,QACN,kBAAC,IAAD,KAEQN,EACI,kBAAC,IAAD,CACIO,OAAO,wBACPC,OAAS,kBAAC,IAAD,CAAQC,KAAO,GAAKb,IAAMI,EAAKU,aAEtCV,EAAKW,YAGnC,yBAIY,kBAAC,IAAD,CAAOC,OAAS,kBAAC,IAAD,CAAQC,KAAK,aAAb,+CAC9B,kBAAC,IAAD,okDAGA,kBAAC,IAAD,0TAC8E,kBAAC,IAAD,CAAMC,OAAO,YAAb,kCAD9E,4QAIkB,kBAAC,IAAD,KACI,kBAAC,IAAD,CAAOC,KAAK,OAAOT,GAAG,QAEtB,kBAAC,IAAD,CAAQG,KAAK,KAAKO,QAAUrB,KAAKb,UAAjC,6DAInBE,GACF,kBAAC,IAAD,CAAKiC,MAAO,CAAEC,UAAW,WACA,yBAAKZ,GAAG,WAAWa,IAAI,wB,GA7ErCC,IAAMC,YCZxBpB,IAAOC,KAAK,eAAgB,IAE5BoB,IAASC,OAAO,kBAAC,EAAD,MAAStC,SAASC,eAAe,W","file":"static/js/main.cbb3ec34.chunk.js","sourcesContent":["import React from 'react';\r\nimport bridge from '@vkontakte/vk-bridge';\r\nimport {\r\n    Avatar,\r\n    Button,\r\n    Div,\r\n    FormLayout,\r\n    Group,\r\n    Header,\r\n    Input,\r\n    Panel,\r\n    PanelHeader,\r\n    PanelHeaderContent,\r\n    Text,\r\n    View\r\n} from '@vkontakte/vkui';\r\n\r\nimport '@vkontakte/vkui/dist/vkui.css';\r\n\r\nclass App extends React.Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tuser: null\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tbridge.send('VKWebAppGetUserInfo', {})\r\n\t\t\t.then((user) => {\r\n\t\t\t\tthis.setState({ user });\r\n\t\t\t});\r\n\t}\r\n\r\n\tgetImage = async () => {\r\n        const image = document.getElementById('url').value;\r\n\r\n        console.log({image});\r\n\r\n        if (image) {\r\n\r\n            var img = new Image();\r\n            img.onerror = function(e) {\r\n            }\r\n            img.onload = function() {\r\n              if (this.src.match(/https:/)) {\r\n                document.getElementById('safe-img').src = this.src;\r\n              } else {\r\n                this.src = this.src.replace('http:', 'https:');\r\n              }\r\n            };\r\n            img.src = {image};\r\n\r\n\t\t\t//this.setState({ image });\r\n\t\t}\r\n\t};\r\n\r\n\trender() {\r\n\t\tconst { user, image } = this.state;\r\n\r\n\t\treturn (\r\n            <View activePanel=\"main\">\r\n                <Panel id=\"main\">\r\n                    <PanelHeader>\r\n\t\t\t\t\t\t{\r\n                            user ?\r\n                                <PanelHeaderContent\r\n                                    status=\"VK Apps Image Example\"\r\n                                    before={ <Avatar size={ 36 } src={ user.photo_100 } /> }\r\n                                >\r\n                                    { user.first_name }\r\n                                </PanelHeaderContent>\r\n\t\t\t\t\t\t\t\t:\r\n\t\t\t\t\t\t\t\t'VK Apps Image Example'\r\n\t\t\t\t\t\t}\r\n                    </PanelHeader>\r\n\r\n                    <Group header={ <Header mode=\"secondary\">Задание</Header> }>\r\n\t\t\t\t\t\t<Div>\r\n\t\t\t\t\t\t\tУ нас есть мини-приложение, которое имеет возможность загружать изображения по внешней ссылке. Увы, в приложении допущена ошибка, из-за чего удаленный сервер получает параметры запуска пользователей, которые вставляют ссылку. Нужно объяснить почему так происходит и исправить ситуацию красиво и лаконично.\r\n\t\t\t\t\t\t</Div>\r\n\t\t\t\t\t\t<Div>\r\n                            Для облегчения тестирования можно использовать картинку <Text weight=\"semibold\">https://service.pavel.im/image</Text> (good code — все круто, bad code — сервер получил параметры запуска)\r\n\t\t\t\t\t\t</Div>\r\n\r\n                        <FormLayout>\r\n                            <Input type=\"text\" id=\"url\" />\r\n\r\n                            <Button size=\"xl\" onClick={ this.getImage }>Загрузить</Button>\r\n                        </FormLayout>\r\n\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t!!image &&\r\n\t\t\t\t\t\t\t<Div style={{ textAlign: 'center' }}>\r\n                                <img id=\"safe-img\" alt=\"remote file\" />\r\n\t\t\t\t\t\t\t</Div>\r\n\t\t\t\t\t\t}\r\n                    </Group>\r\n                </Panel>\r\n            </View>\r\n\t\t);\r\n\t}\r\n\r\n}\r\n\r\nexport default App;\r\n","import 'core-js/es6/map';\r\nimport 'core-js/es6/set';\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport bridge from '@vkontakte/vk-bridge';\r\nimport App from './App';\r\n\r\nbridge.send('VKWebAppInit', {});\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n"],"sourceRoot":""}